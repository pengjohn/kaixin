/*!
*@FileName: KaiXinApp_CommonList.h
*@Author: huxianxiang@GoZone
*@Date: 2010-10-8
*@Log: 	Author 			Date 		Description
*
*@section Copyright
* =======================================================================<br>
*          Copyright ? 2010-2012 GOZONE <br>
*                All Rights Reserved.<br>
* The file is generated by Kaixin_Component Wizard for Tranzda Mobile Platform <br>
* =======================================================================<br>
*/

#ifndef  __KAIXINAPI_COMMENT_H__
#define  __KAIXINAPI_COMMENT_H__

#include "KaiXinAPI.h"

#define KX_COMMENT_COUNT_MAX 		(100)
#define KX_COMMENT_ITEM_COUNT_MAX	(200)

typedef enum
{
	KX_COMMON_LIST_TYPE_MESSAGE,				//短消息
	KX_COMMON_LIST_TYPE_COMMENT_SENT,			//评论回复
	KX_COMMON_LIST_TYPE_COMMENT_RECEIVED,		//评论
	KX_COMMON_LIST_TYPE_USER_COMMENT_SENT,		//留言回复
	KX_COMMON_LIST_TYPE_USER_COMMENT_RECEIVED,	//留言
	KX_COMMON_LIST_TYPE_COMMENT_REPASTE,		//自己转帖评论
	KX_COMMON_LIST_TYPE_USER_COMMENT_REPASTE,	//好友转帖评论
	KX_COMMON_LIST_TYPE_COMMENT_DIARY,			//好友日记评论
	KX_COMMON_LIST_TYPE_COMMENT_RECORD,			//好友记录评论
	KX_COMMON_LIST_TYPE_COMMENT_STATE,			//好友状态评论
}KX_CommonListType;

typedef struct
{
	int ret;
	int uid;
	int cid;
}tResponsePostComment;

extern void* KaiXinAPI_PostComment_JsonParse(char *text);

class TAppCommonListForm : public TWindow
{
public:
	TAppCommonListForm(TApplication* pApp, Boolean bNew = TRUE);
	TAppCommonListForm(TApplication* pApp,KX_CommonListType nType, Boolean bNew = TRUE);
	virtual ~TAppCommonListForm(void);
	virtual Boolean EventHandler(TApplication * appP, EventType * eventP);

private:
	Boolean _OnWinInitEvent(TApplication * pApp, EventType * pEvent);
	Boolean _OnWinClose(TApplication * pApp, EventType * pEvent);
	Boolean _OnCtrlSelectEvent(TApplication * pApp, EventType * pEvent);
	Boolean TAppCommonListForm_Init(TApplication* pApp);
	Int32 TAppCommonListForm_TypeFilter(void* pList,KX_CommonListType nType);
	Int32 TAppCommonListForm_DownloadDetail(TApplication* pApp, Int32 nIndex);
	Int32 TAppCommonListForm_ShowGroup(TApplication* pApp, void* pInfoList, Int32 nItemIndex);
protected:
	Int32 				m_BackBtn;
	KX_CommonListType 	AppType;
	Int32 				nGroupCount;
	Int32 				nItemCount;
	Int32 				nCurrentIndex;
	Int32 				nCurrentItem;
	Int32 				nLogoIndex;
	char 				nCommonListGroup[KX_COMMENT_COUNT_MAX][32];
	Int32 				nCommonListGroupFuid[KX_COMMENT_COUNT_MAX];//用于保存主线Fuid
	char 				nMidGroup[KX_COMMENT_COUNT_MAX][32];
	TBitmap* 			pBmp[KX_COMMENT_ITEM_COUNT_MAX];//For user photo
	Int32 				pLogoID[KX_COMMENT_ITEM_COUNT_MAX];
	Int32 				ActionButID[KX_COMMENT_COUNT_MAX];
	Int32 				nTimerId;
	Int32 				nWriteNewBtn; 
	Int32				nNoneItemInfo;	//没有条目时的提示显示
	tResponseUserCommentList 	pCommentList;
	tResponseMessagesList 		pMessagetList;
	void* 				pItemList;
	Boolean 			bShowDetail;
	Boolean 			bShowCommentTitle;
	Boolean 			bNeedRefresh;
	Boolean 			bNeedDownloadDetail;
	Kx_AccessType 		nPreHandle;
};

#endif
