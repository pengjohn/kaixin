/*!
*@FileName: KaiXinAPI_Comment_Detail.h
*@Author: huxx@GoZone
*@Date: 2010/11/7
*@Log: 	Author 			Date 		Description
*
*@section Copyright
* =======================================================================<br>
*          Copyright ? 2010-2012 GOZONE <br>
*                All Rights Reserved.<br>
* The file is generated by Kaixin_Component Wizard for Tranzda Mobile Platform <br>
* =======================================================================<br>
*/

#ifndef  __KAIXINAPI_COMMENT_DETAIL_H__
#define  __KAIXINAPI_COMMENT_DETAIL_H__

#include "KaiXinAPI.h"

#define KX_COMMENT_NUM_MAX 		(50)

typedef struct
{
	int ret;
	int uid;
	char mid[16 + 1];
}tResponseSendAMessage;

typedef struct
{
	int ret;
	int uid;
}tResponseDeleteComment;

typedef struct
{
	int ret;
	int uid;
}tResponseDeleteMessage;

typedef struct
{
	int cid;
	int ret;
	char uid[16 + 1];
}tResponseReplyComment;

typedef enum
{
	KX_MESSAGE_TYPE_COMMENT_RECEIVED,	//评论
	KX_MESSAGE_TYPE_COMMENT_SENT,		//评论回复
	KX_MESSAGE_TYPE_USER_COMMENT_RECEIVED,//留言
	KX_MESSAGE_TYPE_USER_COMMENT_SENT,	//留言回复
	KX_MESSAGE_TYPE_COMMENT_REPASTE,	//转帖回复
	KX_MESSAGE_TYPE_SMS,				//短消息
}KX_MESSAGE_DETAIL_TYPE;


extern void* KaiXinAPI_DeleteComment_JsonParse(char *text);
extern void* KaiXinAPI_DeleteMessage_JsonParse(char *text);
extern void* KaiXinAPI_SendAMessage_JsonParse(char *text);
extern void* KaiXinAPI_ReplyComment_JsonParse(char *text);

class TComment_DetailForm : public TWindow
{
public:
	TComment_DetailForm(TApplication* pApp);
	TComment_DetailForm(TApplication* pApp,KX_MESSAGE_DETAIL_TYPE nType);
	virtual ~TComment_DetailForm(void);
	virtual Boolean EventHandler(TApplication * appP, EventType * eventP);
	Int32   _FormInfo_Update();

private:
	Boolean _OnWinInitEvent(TApplication * pApp, EventType * pEvent);
	Boolean _OnWinClose(TApplication * pApp, EventType * pEvent);
	Boolean _OnCtrlSelectEvent(TApplication * pApp, EventType * pEvent);
	Boolean TAppCommentDetailForm_Init(TApplication* pApp);
	Int32 	ShowItems(TApplication * pApp, KX_MESSAGE_DETAIL_TYPE nType);

protected:

	Int32 			nCount;
	TMaskButton* 	pLogo[KX_COMMENT_NUM_MAX];
	TBitmap* 		pBmp[KX_COMMENT_NUM_MAX];//For user photo
	Int32 			pLogoID[KX_COMMENT_NUM_MAX];
	int 			Fuids[KX_COMMENT_NUM_MAX];
	char 			pszFuids[KX_COMMENT_NUM_MAX][32];
	Int32 			Flags[KX_COMMENT_NUM_MAX];
	Int32 			pReplyID;
	Int32 			pDeleteID;
	KX_MESSAGE_DETAIL_TYPE 	AppType;
	Kx_AccessType 	nListHandle;
	Kx_AccessType 	nDetailHandle;
	Kx_AccessType 	nReplyHandle;
	Kx_AccessType 	nDeleteHandle;
	Boolean 		bNeedRefresh;

	Int32	m_BackBtn;
};

#endif